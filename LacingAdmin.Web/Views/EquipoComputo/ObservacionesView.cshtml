@model LacingAdmin.Web.Models.ViewModels.ObservacionXHardwareViewModel

@if (Model.ListaObservacionesXHardware != null && Model.ListaObservacionesXHardware.Count > 0)
{
    if (Model.TipoObservacion.Equals("Software"))
    {
        <table class="table">
            <thead>
                <tr>
                    <th>NOMBRE</th>
                    <th>VERSION</th>
                    <th>TIPO</th>
                    <th>FECHA</th>
                    <th>OBSERVACION</th>
                    <th class="sorting_disabled" rowspan="1" colspan="1">ACCIONES</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.ListaObservacionesXHardware)
                {
                    <tr>
                        <td>@item.NombreSoftware</td>
                        <td>@item.VersionSoftware</td>
                        <td>@item.TipoSoftware</td>
                        <td>@item.Fecha</td>
                        <td>@item.Observacion</td>
                        <td>
                            <a onclick="agregarObservacion(@item.IdObservacionXHardware)" class="btn btn-sm btn-icon btn-pure btn-default on-default fa-plus-circle"></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else if (Model.TipoObservacion.Equals("Hardware"))
    {
        <table class="table">
            <thead>
                <tr>
                    <th>FECHA</th>
                    <th>OBSERVACION</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.ListaObservacionesXHardware)
                {
                    <tr>
                        <td>@item.Fecha</td>
                        <td>@item.Observacion</td>
                    </tr>
                }
            </tbody>
        </table>
    }
}
else
{
    <div class="alert alert-primary center" role="alert" style="width:100%; margin: 0 auto; text-align:center">
        No se obtuvo información de observaciones del hardware.
    </div>
}

<br />

@if (Model.TipoObservacion.Equals("Software"))
{
    <div class="form-horizontal">
        <label class="col-sm-auto control-label" style="font-weight: 500">Agregar Observacion:</label>
        <div class="form-group">
            <label class="col-sm-auto control-label">Observación</label>
            <div class="col-sm-10">
                @Html.Editor("txtObservacionSoftware",
                       new { htmlAttributes = new { @class = "form-control", @id = "txtObservacionSoftware" } })
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <a id="btnAgregarObservacionSoftware" class="btn btn-success" style="color:white">Agregar</a>
            </div>
        </div>
    </div>
}
else if (Model.TipoObservacion.Equals("Hardware"))
{
    <div class="form-horizontal">
        <label class="col-sm-auto control-label" style="font-weight: 500">Agregar Observacion:</label>
        <div class="form-group">
            <div class="col-sm-10">
                @Html.Editor("txtObservacionHardware",
                       new { htmlAttributes = new { @class = "form-control", @id = "txtObservacionHardware" } })
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <a id="btnAgregarObservacionHardware" class="btn btn-success" style="color:white">Agregar</a>
            </div>
        </div>
    </div>
}


<script type="text/javascript">
    function agregarObservacion(idObservacion) {

    }

    $("#btnAgregarObservacionHardware").on("click", function () {
        lacing.helpers.CloseModal('ObservacionesHardwarePopup');
        lacing.helpers.CloseModal('ObservacionesSoftwarePopup');
        var observacion = {
            "IdHardware": "@Model.ObservacionXHardware.IdHardware",
            "Tipo": "Hardware",
            "Observacion": $("#txtObservacionHardware").val(),
        };
        $.ajax({
            type: "POST",
            url: "@Url.Action("ObservacionesView", "EquipoComputo")",
            data: {
                "observacion": observacion
            },
            beforeSend: function () {
                onBeginRequest();
            },
            success: function (result) {
                onCompleteRequest();
                Swal.fire(
                    '¡Listo!',
                    'La observación ha sido registrada.',
                    'success'
                );
                setTimeout(function () {
                    window.location.href = "/EquipoComputo";
                }, 1100);
            },
            error: function (error) {
                Swal.fire(
                    '¡Error!',
                    'No se pudo registrar la observación',
                    'error'
                );
                onCompleteRequest();
            }
        });
    });

</script>

